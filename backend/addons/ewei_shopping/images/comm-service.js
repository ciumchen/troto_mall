!function(t,n,o){function i(t){this.list=t.list,this.nav=t.nav,this.con=t.con,this.on=t.on,this.h=parseInt(n.documentElement.clientHeight||n.body.clientHeight),this.topArr=[],this.init()}function s(t){this.btn=t.btn,this.box=t.box,this.boxMain=t.boxMain,this.init()}function a(t){this.list=t.list,this.load=t.load,this.url=t.url,this.init()}function e(t){this.commName=t.commName,this.sel=t.sel,this.addr=t.addr,this.username=t.username,this.phone=t.phone,this.btn=t.btn,this.init()}var c="ontouchstart"in t?!0:!1,r=c?"touchend":"mouseup";i.prototype={constructor:i,scrollFixed:function(){function t(){var t=parseInt(n.documentElement.scrollTop||n.body.scrollTop);t+5>o?(i.nav.addClass(i.on),i.con.addClass(i.on)):(i.nav.removeClass(i.on),i.con.removeClass(i.on));for(var s=0,a=i.topArr.length;a>s;s++)t>i.topArr[s]&&i.nav.find("li").eq(s).addClass(i.on).siblings().removeClass(i.on)}var o,i=this;o=parseInt(this.nav.offset().top),i.con.find(i.list).each(function(){var t=$(this).offset().top;i.topArr.push(t-100)}),t(),$(n).on("scroll",function(){t()})},gotoNavLocation:function(){function t(t){$("html, body").animate({scrollTop:t},"slow",function(){})}var n=this,o=!1;this.nav.find("li").on("click",function(){var i=$(this).attr("data-pcate");n.con.find(n.list).each(function(){if($(this).attr("data-pcate")==i){var n=$(this).offset().top;return t(n-70),o=!0,!1}}),o||t(0)})},init:function(){var n=this;this.gotoNavLocation(),t.onload=function(){n.scrollFixed()}}},t.CommService=i,s.prototype={constructor:s,btnShowAtten:function(){var t=this;this.btn.on(r,function(){t.box.fadeIn(),t.boxMain.fadeIn()}),this.box.on(r,function(){t.box.fadeOut(),t.boxMain.fadeOut()})},init:function(){this.btnShowAtten()}},t.AttentionPrompt=s,a.prototype={constructor:a,selectComm:function(){var t=this;this.list.on(r,function(){var n=$(this).attr("data-id");n&&(t.load.show().find("i").show(),t.load.find("span").text("正在更换社区..."),$.ajax({type:"post",url:t.url,data:{groupid:n},dataType:"json",success:function(n){200==n.status?location.href=n.link:(t.load.find("i").hide(),t.load.find("span").text("更换社区失败，请重新选择！"),setTimeout(function(){t.load.hide()},2e3))}}))})},init:function(){this.selectComm()}},t.CommunityChange=a,e.prototype={constructor:e,submitDataInfo:function(){var t=this;this.btn.on(r,function(){var n=t.commName.val(),o=t.addr.val(),i=t.username.val(),s=t.phone.val(),a=/^[+]{0,1}(\d){1,3}[ ]?([-]?((\d)|[ ]){1,12})+$/,e="";return""==n?e="请输入小区名称":t.sel.each(function(){var t=$(this).val();return""==t||"市辖区"==t?void(e="请输入小区地址"):void 0}),""==e&&(""==o?e="请输入详细地址":""==i?e="请输入您的姓名":""==s?e="请输入您的手机号码":a.test(s)||(e="请输入正确的手机号码")),""!=e?(Util.promptBox({title:"note",info:e,leftBtn:"确定"}),!1):void 0})},init:function(){this.submitDataInfo()}},t.AppCommunity=e}(window,document);