!function(t,a,n){function e(){var t=$(".exchange-rule"),a=$(".rule-ok-btn"),n=$(".exchange-link");a.on("touchend",function(){$(this).hide(),t.slideUp(150),setTimeout(function(){n.show()},80)})}function i(t){var a=$(".balance-input"),n=$(".balance-money"),e=$(".balance-btn"),i=n.attr("data-max");i=""==i?parseFloat(0).toFixed(2):parseFloat(i).toFixed(2),a.on("keyup",function(t){var a=$(this);if(8!=t.keyCode){a.val(a.val().replace(/[^0-9.]/g,""));var e=a.val();e=""==e?parseFloat(0).toFixed(2):parseFloat(e).toFixed(2),i-e>0?n.text("￥"+e):(n.text("￥"+i),a.val(i))}}),e.on("touchend",function(){var n=a.val();return""==n?(Util.promptBox({title:"note",info:"转换金额不能为空！",leftBtn:"我知道了"}),!1):(0>i-n&&(n=i,a.val(i)),"0.00"==n?(Util.promptBox({title:"note",info:"可提现分成不足！",leftBtn:"我知道了"}),!1):(n=parseFloat(n).toFixed(2),$(".loading").show(),void $.ajax({type:"post",url:t.url,data:{money:n},dataType:"json",success:function(a){$(".loading").hide(),200==a.status&&Util.promptBox({title:"ok",titleInfo:t.info,leftBtn:"确定",callback:function(){location.href=a.link}})}})))})}function o(t){this.btn=t.btn,this.bankName=t.bankName,this.subName=t.subName,this.bankAc=t.bankAc,this.acName=t.acName,this.mobile=t.mobile,this.bankType=t.bankType,this.url=t.url,this.init()}function l(t){var a=($(".bankcard-list > div"),$(".bankcard-del"));a.on("touchend",function(){var a=$(this);Util.promptBox({title:"",info:"删除此银行卡信息",leftBtn:"删除",rightBtn:"取消",callback:function(){var n=a.parent("div"),e=n.attr("data-id");$.ajax({type:"post",url:t.url,data:{id:e,type:"del"},dataType:"json",success:function(t){200==t.status&&n.remove()}})}})})}function s(t){var a=$(".inquire-nav li"),n=$(".inquire-con li");a.on("touchend",function(){var a=$(this).index();$(this).addClass(t.on).siblings().removeClass(t.on),n.eq(a).addClass(t.on).siblings().removeClass(t.on)})}return t.exchangeRule=e,t.exBalance=i,o.prototype={constructor:o,checkNumber:function(){this.bankAc.on("keyup",function(t){var a=$(this);8!=t.keyCode&&a.val(a.val().replace(/[^0-9\s]/g,"").replace(/(\d{4})(?=[^\s])/,"$1 "))}),this.mobile.on("keyup",function(){var t=$(this);t.val(t.val().replace(/[^0-9]/g,""))})},checkBankCard:function(){var t=$.trim(this.bankName.val()),a=$.trim(this.subName.val()),n=$.trim(this.bankAc.val()),e=$.trim(this.acName.val()),i=$.trim(this.mobile.val()),o=this.bankType.val(),l="";if(""==t?l="开户银行不能为空！":""==a?l="支行名称不能为空！":""==n?l="银行账户不能为空！":""==e?l="开户姓名不能为空！":""==i&&(l="联系电话不能为空！"),""!=n&&""==l){var s=/^\d{16,19}$/;n=Number(n.replace(/[^0-9]/g,"")),s.test(n)||(l="请输入正确的银行账户号码！",flag=!1)}if(""!=i&&""==l){var c=/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/;c.test(i)||(l="请输入正确的手机号码！")}return""!=l?(Util.promptBox({title:"note",info:l,leftBtn:"我知道了"}),!1):{bankName:t,subName:a,bankAc:n,acName:e,mobile:i,type:o}},saveBankCardInfo:function(){var t,a=this;this.btn.on("touchend",function(){t=a.checkBankCard(),0!=t&&$.ajax({type:"post",url:a.url,data:t,dataType:"json",success:function(t){200==t.status&&Util.promptBox({title:"ok",info:"银行卡添加成功！",leftBtn:"我知道了",callback:function(){location.href=t.link}})}})})},init:function(){this.checkNumber(),this.saveBankCardInfo()}},t.AddBankCardInfo=o,t.bancardListDel=l,t.tabInquire=s,{rule:e,balance:i,add:o,list:l}}(window,document);